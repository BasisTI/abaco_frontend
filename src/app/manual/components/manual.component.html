<div class="ui-g ui-fluid">
    <div class="ui-g-12 ui-md-12 ui-sm-12">
        <div class="card card-w-title">
            <h1 translate="Cadastros.Manual.Manual">Manual</h1>
            <div class="ui-g">
                <div class="ui-g-12 ui-md-12 ui-sm-12">
                    <span class="md-inputfield">
                        <input type="text" pInputText class="ui-inputtext" name="manualFiltro" [(ngModel)]="filtro.nome"
                            (keyup.enter)="obterManuais()" maxlength="100" />
                        <label for="manualFiltro" translate="Cadastros.Manual.Descricao">Descrição</label>
                    </span>
                </div>

                <div class="ui-g">

                    <div class="ui-g ui-md-12 form-buttons-container">
                        <div class="ui-g-2 ui-md-2 ui-sm-12">
                            <app-white-button [buttonLabel]="'Global.Botoes.LimparPesquisa' | translate"
                                buttonIcon="ui-icon-clear-all" (click)="limparPesquisa()">
                            </app-white-button>
                        </div>

                        <div class="ui-g-2 ui-md-2 ui-sm-12">
                            <app-blue-button [buttonLabel]="'Global.Botoes.Pesquisar' | translate"
                                buttonIcon="ui-icon-search" (click)="obterManuais()">
                            </app-blue-button>
                        </div>

                        <div class="ui-g-2 ui-md-2 ui-sm-12">
                            <app-green-button [buttonLabel]="'Global.Botoes.Novo' | translate" buttonIcon="ui-icon-add"
                                routerLink="/manual/new">
                            </app-green-button>
                        </div>

                    </div>

                    <div class="dynamic-table-container">
                        <div class="table-container">
                            <p-dataTable (onRowDblclick)="abrirEditar()" [rows]="20" [value]="manuais.content"
                                (onRowSelect)="susbcribeSelectRow($event.data)" (onRowUnselect)="subscrbeUnselectRow()"
                                [rowsPerPageOptions]="[5, 10, 20]" [totalRecords]="manuais.totalElements"
                                [paginator]="true" selectionMode="single" [lazy]="true" (onLazyLoad)="obterManuais()"
                                dataKey="id" #datatable>

                                <p-column [header]="'Cadastros.Manual.Nome' | translate" field="nome" [sortable]="true">
                                </p-column>

                                <p-column [header]="'Cadastros.Manual.Estimada' | translate"
                                    field="valorVariacaoEstimada" [sortable]="true">
                                    <ng-template let-col let-valorVariacaoEstimada="rowData" pTemplate="body">
                                        {{ valorVariacaoEstimada[col.field].toString() | slice:0:4}}%
                                    </ng-template>
                                </p-column>

                                <p-column [header]="'Cadastros.Manual.Indicativa' | translate"
                                    field="valorVariacaoIndicativa" [sortable]="true">
                                    <ng-template pTemplate="body" let-col let-valorVariacaoIndicativa="rowData">
                                        {{ valorVariacaoIndicativa[col.field].toString() | slice:0:4}}%
                                    </ng-template>
                                </p-column>

                                <p-column [header]="'Cadastros.Manual.Inclusao' | translate" field="parametroInclusao"
                                    [sortable]="true">
                                    <ng-template let-col let-parametroInclusao="rowData" pTemplate="body">
                                        {{ parametroInclusao[col.field].toString() | slice:0:4}}%
                                    </ng-template>
                                </p-column>

                                <p-column [header]="'Cadastros.Manual.Alteracao' | translate" field="parametroAlteracao"
                                    [sortable]="true">
                                    <ng-template let-col let-parametroAlteracao="rowData" pTemplate="body">
                                        {{ parametroAlteracao[col.field].toString() | slice:0:4}}%
                                    </ng-template>
                                </p-column>

                                <p-column [header]="'Cadastros.Manual.Exclusao' | translate" field="parametroExclusao"
                                    [sortable]="true">
                                    <ng-template let-col let-parametroExclusao="rowData" pTemplate="body">
                                        {{ parametroExclusao[col.field].toString() | slice:0:4}}%
                                    </ng-template>
                                </p-column>

                                <p-column [header]="'Cadastros.Manual.Conversao' | translate" field="parametroConversao"
                                    [sortable]="true">
                                    <ng-template let-col let-parametroConversao="rowData" pTemplate="body">
                                        {{ parametroConversao[col.field].toString() | slice:0:4}}%
                                    </ng-template>
                                </p-column>

                                <p-column [header]="'Cadastros.Manual.Observacao' | translate" field="observacao"
                                    [sortable]="true">
                                </p-column>
                            </p-dataTable>
                        </div>

                        <div class="table-next-containter">
                            <div class="btn-table">
                                <button type="button" pButton class="green-btn side-button" name="edit"
                                    icon="ui-icon-edit" value="edit" [title]="'Global.Botoes.Editar' | translate"
                                    (click)="abrirEditar()" [disabled]="selectedLine == null">
                                </button>
                                <button type="button" pButton class="side-button" name="view"
                                    icon="ui-icon-remove-red-eye" [title]="'Global.Botoes.Visualizar' | translate"
                                    (click)="abrirVisualizar()" [disabled]="selectedLine == null">
                                </button>
                                <button type="button" pButton class="ui-button-danger side-button" name="delete"
                                    icon="ui-icon-trash" [title]="'Global.Botoes.Excluir' | translate"
                                    (click)="confirmDelete(selectedLine.id)" [disabled]="selectedLine == null">
                                </button>
                            </div>
                        </div>
                    </div>

                    <div class="ui-g-12 ui-md-2">
                        <app-export-button [dataTable]="dataTable" resourceName="manual" [filter]="filtro">
                        </app-export-button>
                    </div>

                </div>

            </div>
        </div>
    </div>
</div>

<p-confirmDialog [header]="'Global.Mensagens.Confirmacao' | translate" #dialog>
    <p-footer>
        <app-white-button [buttonLabel]="'Global.Botoes.Nao' | translate" buttonIcon="fa-close"
            (click)="dialog.reject()"></app-white-button>
        <app-green-button [buttonLabel]="'Global.Botoes.Sim' | translate" buttonIcon="fa-check"
            (click)="dialog.accept()"></app-green-button>
    </p-footer>
</p-confirmDialog>

<p-dialog [header]="'Cadastros.Manual.ClonarManual' | translate" [(visible)]="mostrarDialogClonar"
    [contentStyle]="{'overflow':'visible'}" [width]="800">
    <div class="ui-g">
        <div class="ui-g-12 ui-md-12 ui-sm-12" class="form-fields-container">
            <span class="md-inputfield">
                <input id="nome_manual" type="text" name="nomeManualClonado" [(ngModel)]="nomeDoManualClonado"
                    pInputText size="90" maxlength="250" />
                <div *ngIf="nomeValido">
                    <span class="invalidField" translate="Global.Mensagens.CampoObrigatorio">Campo obrigatório.</span>
                </div>
                <label translate="Cadastros.Manual.Nome*">Nome*</label>
            </span>
        </div>
    </div>

    <div class="ui-g ui-md-12" class="buttonFlexEnd">
        <app-white-button [buttonLabel]="'Global.Botoes.Cancelar' | translate" buttonIcon="fa-close"
            (click)="fecharDialogClonar()">
        </app-white-button>
        <app-green-button [buttonLabel]="'Global.Botoes.Salvar' | translate" buttonIcon="ui-icon-save"
            (click)="clonar()"></app-green-button>
    </div>
</p-dialog>